webpackJsonp([1],{NHnr:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=r("7+uW"),o={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]};var a=r("VU/8")({name:"App"},o,!1,function(t){r("cnV5")},null,null).exports,n=r("/ocq"),u=r("Dd8w"),i=r.n(u),l=r("mtWM").a.create({baseURL:"https://4017p6352h.goho.co/api",timeout:5e3});l.interceptors.request.use(function(t){return t}),l.interceptors.response.use(function(t){return t.data});var c=l;var m={login:function(t){return c({url:"/cattle/house/user/login",method:"post",data:t})},initCost:function(t){return c({url:"/cattle/house/cost/initCost",method:"post",data:t})},calculateCost:function(t){return c({url:"/cattle/house/cost/calculateCost",method:"post",data:t})},saveCost:function(t){return c({url:"/cattle/house/cost/saveCost",method:"post",data:t})}},_=r("NYxO"),v=function(t,e,r){""===e?r(new Error("请输入密码")):r()},d=function(t,e,r){""===e?r(new Error("请输入用户编号/手机号")):r()},p={name:"Login",data:function(){return{ruleForm:{user_no:"",user_password:""},rules:{user_no:[{validator:d,trigger:"blur"}],user_password:[{validator:v,trigger:"blur"}]}}},computed:i()({},Object(_.b)(["userInfo"])),methods:{submitForm:function(t){var e=this;this.$refs[t].validate(function(t){if(!t)return!1;m.login(i()({},e.ruleForm,{user_phone:e.ruleForm.user_no})).then(function(t){1===t.code?(e.$store.commit("setUserInfo",t.data),e.$router.push("/Calculate")):e.$message(t.message)})})}}},f={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:t.ruleForm,"status-icon":"",rules:t.rules,"label-width":"0"}},[r("el-form-item",{attrs:{prop:"user_no"}},[r("el-input",{attrs:{"prefix-icon":"el-icon-user",type:"text",autocomplete:"off",placeholder:"请输入用户编号/手机号"},model:{value:t.ruleForm.user_no,callback:function(e){t.$set(t.ruleForm,"user_no",e)},expression:"ruleForm.user_no"}})],1),t._v(" "),r("el-form-item",{attrs:{prop:"user_password"}},[r("el-input",{attrs:{"prefix-icon":"el-icon-lock",type:"password",autocomplete:"off",placeholder:"请输入密码"},model:{value:t.ruleForm.user_password,callback:function(e){t.$set(t.ruleForm,"user_password",e)},expression:"ruleForm.user_password"}})],1),t._v(" "),r("el-form-item",[r("el-button",{staticClass:"submit",attrs:{type:"primary",plain:""},on:{click:function(e){return t.submitForm("ruleForm")}}},[t._v("登 录")])],1)],1)},staticRenderFns:[]};var b=r("VU/8")(p,f,!1,function(t){r("gIPy")},"data-v-301e61da",null).exports,h={name:"Calculate",data:function(){return{ruleForm:{},rules:{}}},computed:i()({},Object(_.b)(["userInfo"])),methods:{validateFun:function(t,e){this.ruleForm[e]<this.ruleForm[t]&&(this.$message("本次读数需大于等于上次读数"),this.$set(this.ruleForm,e,""))},getInit:function(){var t=this;m.initCost({user_id:this.userInfo.user_id}).then(function(e){if(1===e.code){var r=i()({},e.data);for(var s in r)0!=r[s]&&t.$set(t.ruleForm,s,r[s])}else t.$message(e.message)})},submitForm:function(t){var e=this;this.ruleForm.cost_w_e_number&&this.ruleForm.cost_e_e_number&&this.ruleForm.cost_g_e_number?m.calculateCost(i()({},this.ruleForm,{cost_contract_no:this.userInfo.user_contract_no})).then(function(t){1===t.code?(e.$store.commit("setCalculate",t.data),e.$router.push("/Cost")):e.$message(t.message)}):this.$message("请输入本次读数")}},mounted:function(){this.getInit()}},F={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:t.ruleForm,"status-icon":"",rules:t.rules,"label-width":"0"}},[r("div",{staticClass:"header"},[t._v("水表")]),t._v(" "),r("el-form-item",{attrs:{prop:"cost_w_s_number"}},[r("div",{staticClass:"diy-input"},[r("div",{staticClass:"label"},[t._v("上次读数")]),t._v(" "),r("div",{staticClass:"value"},[t._v(t._s(t.ruleForm.cost_w_s_number))])])]),t._v(" "),r("el-form-item",{attrs:{prop:"cost_w_e_number"}},[r("el-input",{attrs:{type:"number",autocomplete:"off"},on:{blur:function(e){return t.validateFun("cost_w_s_number","cost_w_e_number")}},model:{value:t.ruleForm.cost_w_e_number,callback:function(e){t.$set(t.ruleForm,"cost_w_e_number",e)},expression:"ruleForm.cost_w_e_number"}},[r("template",{slot:"prepend"},[t._v("本次读数")])],2)],1),t._v(" "),r("div",{staticClass:"header"},[t._v("电表")]),t._v(" "),r("el-form-item",{attrs:{prop:"cost_e_s_number"}},[r("div",{staticClass:"diy-input"},[r("div",{staticClass:"label"},[t._v("上次读数")]),t._v(" "),r("div",{staticClass:"value"},[t._v(t._s(t.ruleForm.cost_e_s_number))])])]),t._v(" "),r("el-form-item",{attrs:{prop:"cost_e_e_number"}},[r("el-input",{attrs:{type:"number",autocomplete:"off"},on:{blur:function(e){return t.validateFun("cost_e_s_number","cost_e_e_number")}},model:{value:t.ruleForm.cost_e_e_number,callback:function(e){t.$set(t.ruleForm,"cost_e_e_number",e)},expression:"ruleForm.cost_e_e_number"}},[r("template",{slot:"prepend"},[t._v("本次读数")])],2)],1),t._v(" "),r("div",{staticClass:"header"},[t._v("气表")]),t._v(" "),r("el-form-item",{attrs:{prop:"cost_g_s_number"}},[r("div",{staticClass:"diy-input"},[r("div",{staticClass:"label"},[t._v("上次读数")]),t._v(" "),r("div",{staticClass:"value"},[t._v(t._s(t.ruleForm.cost_g_s_number))])])]),t._v(" "),r("el-form-item",{attrs:{prop:"cost_g_e_number"}},[r("el-input",{attrs:{type:"number",autocomplete:"off"},on:{blur:function(e){return t.validateFun("cost_g_s_number","cost_g_e_number")}},model:{value:t.ruleForm.cost_g_e_number,callback:function(e){t.$set(t.ruleForm,"cost_g_e_number",e)},expression:"ruleForm.cost_g_e_number"}},[r("template",{slot:"prepend"},[t._v("本次读数")])],2)],1),t._v(" "),r("el-form-item",[r("el-button",{staticClass:"submit",attrs:{type:"primary"},on:{click:function(e){return t.submitForm("ruleForm")}}},[t._v("计算费用")])],1)],1)},staticRenderFns:[]};var C=r("VU/8")(h,F,!1,function(t){r("nOFJ")},"data-v-244e8b6c",null).exports,g={name:"Calculate",data:function(){return{timer:null,rules:{}}},methods:{moneyFormat:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:",";if(isFinite(t)){if(0===t)return t.toFixed(e);var s="",o=String(t).indexOf(".");if(-1===o)s=String(t).replace(/(\d)(?=(?:\d{3})+$)/g,"$1"+r)+"."+"0".repeat(e);else{var a=String((Math.round(t*Math.pow(10,e))/Math.pow(10,e)).toFixed(e)),n=a.slice(o,o+e+1);s=String(a.slice(0,o)).replace(/(\d)(?=(?:\d{3})+$)/g,"$1"+r)+n}return s}return"--"},submitForm:function(t){var e=this;this.$refs[t].validate(function(t){if(!t)return!1;e.$confirm("提交后将无法修改, 是否提交?","提示",{confirmButtonText:"继续提交",cancelButtonText:"返回重填",type:"warning"}).then(function(){m.saveCost(i()({},e.ruleForm)).then(function(t){1==t.code?(e.$message(t.message),e.timer=null,timer=setTimeout(function(){e.$router.push("/")},1e3)):e.$message(t.message)})}).catch(function(){e.$router.push("/Calculate")})})}},computed:i()({},Object(_.b)(["calculateData"]),{ruleForm:function(){var t=i()({},this.calculateData);for(var e in t)-1!=e.indexOf("_money")&&(t[e]=this.moneyFormat(t[e]));return t}})},w={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:t.ruleForm,"status-icon":"",rules:t.rules,"label-width":"0"}},[r("div",{staticClass:"header"},[t._v("水")]),t._v(" "),r("el-form-item",{attrs:{prop:"cost_w_number"}},[r("div",{staticClass:"diy-input"},[r("div",{staticClass:"label"},[t._v("读数")]),t._v(" "),r("div",{staticClass:"value"},[t._v(t._s(t.ruleForm.cost_w_number))])])]),t._v(" "),r("el-form-item",{attrs:{prop:"cost_w_money"}},[r("div",{staticClass:"diy-input"},[r("div",{staticClass:"label"},[t._v("水费")]),t._v(" "),r("div",{staticClass:"value"},[t._v(t._s(t.ruleForm.cost_w_money))])])]),t._v(" "),r("div",{staticClass:"header"},[t._v("电")]),t._v(" "),r("el-form-item",{attrs:{prop:"cost_e_number"}},[r("div",{staticClass:"diy-input"},[r("div",{staticClass:"label"},[t._v("读数")]),t._v(" "),r("div",{staticClass:"value"},[t._v(t._s(t.ruleForm.cost_e_number))])])]),t._v(" "),r("el-form-item",{attrs:{prop:"cost_e_money"}},[r("div",{staticClass:"diy-input"},[r("div",{staticClass:"label"},[t._v("电费")]),t._v(" "),r("div",{staticClass:"value"},[t._v(t._s(t.ruleForm.cost_e_money))])])]),t._v(" "),r("div",{staticClass:"header"},[t._v("气")]),t._v(" "),r("el-form-item",{attrs:{prop:"cost_g_number"}},[r("div",{staticClass:"diy-input"},[r("div",{staticClass:"label"},[t._v("读数")]),t._v(" "),r("div",{staticClass:"value"},[t._v(t._s(t.ruleForm.cost_g_number))])])]),t._v(" "),r("el-form-item",{attrs:{prop:"cost_g_money"}},[r("div",{staticClass:"diy-input"},[r("div",{staticClass:"label"},[t._v("气费")]),t._v(" "),r("div",{staticClass:"value"},[t._v(t._s(t.ruleForm.cost_g_money))])])]),t._v(" "),r("div",{staticClass:"header total"},[t._v("合计："+t._s(t.ruleForm.cost_total_money)+"元"),r("span",{staticClass:"tips"},[t._v("（请提交后，联系管理员缴费）")])]),t._v(" "),r("el-form-item",[r("el-button",{staticClass:"submit",attrs:{type:"primary"},on:{click:function(e){return t.submitForm("ruleForm")}}},[t._v("提交")])],1)],1)},staticRenderFns:[]};var y=r("VU/8")(g,w,!1,function(t){r("PQLX")},"data-v-4bb92fb1",null).exports;s.default.use(n.a);var $=new n.a({routes:[{path:"/",name:"Login",component:b},{path:"/Calculate",name:"Calculate",component:C},{path:"/Cost",name:"Cost",component:y}]}),x=r("zL8q"),I=r.n(x);r("tvR6");s.default.use(_.a);var k=new _.a.Store({state:{userInfo:{user_contract_no:"",user_id:"",user_name:"",user_no:"",user_phone:""},calculateData:{}},mutations:{setUserInfo:function(t,e){t.userInfo=e},setCalculate:function(t,e){t.calculateData=e}}});s.default.config.productionTip=!1,s.default.use(I.a),new s.default({el:"#app",router:$,store:k,components:{App:a},template:"<App/>"})},PQLX:function(t,e){},cnV5:function(t,e){},gIPy:function(t,e){},nOFJ:function(t,e){},tvR6:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.db085b1d364747501231.js.map